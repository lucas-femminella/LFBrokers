@model LFbrokersV2.Models.Persona

@{
    ViewData["Title"] = "Create";
}
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

<form asp-action="Create">
    <br /><br />
    <h2>Cotizacion Seguro de Proxis Medica Individual</h2>
    <hr />
    @if (ViewBag.Message != null) { 
        <div class="alert alert-success">
            <strong>Sus datos han sido registrados con éxito.</strong>  Un agente comercial se estará conectando a la brevedad.
        </div>
    }
    <div class="row">
        <div class="col-md-4">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            <div class="form-group">
                <label asp-for="Nombres" class="control-label">Nombre</label>
                <input asp-for="Nombres" class="form-control" required maxlength="50" />
                <span asp-validation-for="Nombres" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Apellidos" class="control-label">Apellido</label>
                <input asp-for="Apellidos" class="form-control" required maxlength="50" />
                <span asp-validation-for="Apellidos" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Telefono" class="control-label"></label>
                <input asp-for="Telefono" class="form-control" type="number" max="9999999" />
                <span asp-validation-for="Telefono" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Celular" class="control-label"></label>
                <input asp-for="Celular" class="form-control" type="number" max="9999999" />
                <span asp-validation-for="Celular" class="text-danger"></span>
            </div>
        </div>

        <div class="col-md-4">
            <div class="form-group">
                <label asp-for="TipoDocumento" class="control-label">Tipo de documento</label>
                <select asp-for="TipoDocumento" asp-items="@Model.TipoDocumentoList" class="form-control"></select>
                <span asp-validation-for="TipoDocumento" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="NroDocumento" class="control-label">Numero de Documento</label>
                <input asp-for="NroDocumento" class="form-control" required />
                <span asp-validation-for="NroDocumento" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Email" class="control-label"></label>
                <input asp-for="Email" class="form-control" type="email" />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="FechaNacimiento" class="control-label">Fecha de Nacimiento</label>
                <input asp-for="FechaNacimiento" class="form-control" type="date" />
                <span asp-validation-for="FechaNacimiento" class="text-danger"></span>
            </div>
        </div>
    </div>

    <fieldset style="border: 1px black solid; padding-left: 20px;">
        <legend style="border: 1px black solid;margin-left: 1em; padding: 0.2em 0.8em ">Direccion</legend>
        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <label asp-for="Calle" class="control-label"></label>
                    <input asp-for="Calle" class="form-control" required maxlength="50" />
                    <span asp-validation-for="Calle" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Piso" class="control-label"></label>
                    <input asp-for="Piso" class="form-control" type="number" min="1" max="99" />
                    <span asp-validation-for="Piso" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label asp-for="Altura" class="control-label"></label>
                    <input asp-for="Altura" class="form-control" required type="number" min="1" max="99999" />
                    <span asp-validation-for="Altura" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="Departamento" class="control-label"></label>
                    <input asp-for="Departamento" class="form-control" maxlength="1" />
                    <span asp-validation-for="Departamento" class="text-danger"></span>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label asp-for="Obervaciones" class="control-label"></label>
            <textarea asp-for="Obervaciones" class="form-control"
                      id="Obervaciones"
                      name="Obervaciones"
                      rows="4"
                      cols="10"></textarea>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <label asp-for="CodigoPostal" class="control-label"></label>
                    <select asp-for="CodigoPostal" class="form-control" asp-items="ViewBag.CodigoPostal"></select>
                </div>
              

            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <br /><br />
                    <input class="btn btn-default" type="button" value="Buscar" onclick="getLocation('@Model.CodigoPostal');" />

                </div>
            </div>

            </div>
            <div class="row">
                <div class="col-md-4">

                    <div class="form-group">
                        <label name="Localidad" class="control-label">Localidad</label>
                        <input type="text" class="form-control" name="Localidad" id="Localidad" disabled /><br />


                    </div>

                </div>
                <div class="col-md-4">

                    <div class="form-group">


                        <label name="Provincia" class="control-label">Provincia</label>
                        <input type="text" class="form-control" name="Provincia" id="Provincia" disabled /><br /><br />
                    </div>
                </div>
            </div>

</fieldset>

    <br /><br />
    <div>
        <div class="form-group">
            <label asp-for="SelectedEspecialidades" class="control-label">Especialidades</label>
            <br />
            <select asp-for="SelectedEspecialidades" asp-items="@Model.EspecialidadesList" class="form-control" style="width:300px;height:200px;">
            </select>
        </div>

    </div>
    <div>
        <div class="form-group" style="margin: 0 auto;
     width: 100px; ">
            <input type="submit" value="Cotizar" class="btn btn-default" />
        </div>
    </div>
</form>

<script>
    function getLocation(id) {
    var e = document.getElementById("CodigoPostal");
    var selectedValue = e.options[e.selectedIndex].value;
        $.ajax({
            url: '@Url.Action("getLocation", "Cotizaciones")',
            type: 'GET',
            dataType: 'text',
            cache: false,
            data: { 'id': selectedValue },
            success: function (responseValue) {
                var values = responseValue.split(",");
                $("#Localidad").val(values[0]);
                $("#Provincia").val(values[1]);

                return responseValue;
            },
            error: function () {
                alert('Error occured');
            }
        });
}
</script>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
